(this.webpackJsonpperler=this.webpackJsonpperler||[]).push([[0],{65:function(e,t,a){e.exports=a(87)},70:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a.n(o),c=(a(70),a(56)),i=a(11),s=a(47),u=a.n(s),m=(a(74),a(75),a(76),a(129)),d=a(55),h=a.n(d),f=a(135),p=a(132),v=a(134),g=a(133),b=a(88),E=a(131),y=a(48),j=a(137),k=a(89),w=a(125),O=a(130),S=a(136),M=a(39),x=a(81),I=x.createCanvas,N=(x.loadImage,Object(w.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5),margin:0},chip:{margin:e.spacing(.5)}}})));var C=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),o=t[0],l=t[1],s=Object(n.useState)(46),d=Object(i.a)(s,2),w=d[0],x=d[1],C=Object(n.useState)(1),P=Object(i.a)(C,2),T=P[0],A=P[1],W=Object(n.useRef)(null),B=Object(n.useState)(800),D=Object(i.a)(B,2),R=D[0],F=D[1],U=Object(n.useState)(!0),H=Object(i.a)(U,2),$=H[0],L=H[1],V=Object(n.useRef)(null),z=Object(n.useRef)(!0),G=Object(n.useState)([]),J=Object(i.a)(G,2),_=J[0],q=J[1],K=Object(n.useState)("#"),Q=Object(i.a)(K,2),X=Q[0],Y=Q[1],Z=N(),ee=Object(n.useState)([]),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(5),oe=Object(i.a)(re,2),le=oe[0],ce=oe[1],ie=Object(n.useState)(!1),se=Object(i.a)(ie,2),ue=se[0],me=se[1],de=Object(n.useState)(!0),he=Object(i.a)(de,2),fe=he[0],pe=he[1],ve=Object(n.useState)("placeholder"),ge=Object(i.a)(ve,2),be=ge[0],Ee=ge[1],ye=Object(n.useState)(!0),je=Object(i.a)(ye,2),ke=je[0],we=je[1];return Object(n.useEffect)((function(){z.current?z.current=!1:ue||function(){if(F(V.current?V.current.offsetWidth:0),le>1){L(!1);var e=new Image;e.src=o,e.onload=function(){var t=(new M.a).getPalette(e,le).map((function(e){return"#"+e.map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("")})),n=t.map((function(e){return{key:Math.floor(Math.random()*Math.floor(1e5)),label:e.toUpperCase()}})),r=W.current,o=r.getContext("2d"),l=e.naturalWidth,c=e.naturalHeight/l;A(c);var i=Math.ceil(w/1.6),s=Math.ceil(c*w/1.6),u=Math.ceil(R/i);r.width=u*i,r.height=u*s,o.drawImage(e,0,0,i,s);var m=o.getImageData(0,0,i,s);o.clearRect(0,0,i,s);for(var d=m.data,h=[],f=0;f<m.height;f++){for(var p=[],v=0;v<m.width;v++){var g=4*m.width*f+4*v,b="#"+[d[g],d[g+1],d[g+2]].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),E=a(38).from(t),y=v*u,j=f*u,k=Math.floor(u/2.25)>0?Math.floor(u/2.25):1,O=new Path2D;O.arc(y+u/2,j+u/2,u/2-k/2,0,2*Math.PI,!1),o.lineWidth=k,o.strokeStyle=E(b),o.stroke(O),p.push(E(b))}h.push(p)}if(ne(n),q(h),L(!0),fe){var S=29*u,x=u*i,I=u*s;o.strokeStyle="#00008B",o.beginPath();for(var N=S;N<x;N+=S)o.moveTo(N,0),o.lineTo(N,I);for(var C=S;C<I;C+=S)o.moveTo(0,C),o.lineTo(x,C);o.lineWidth=1,o.stroke()}}}}()}),[o,le,w,R,ue,fe]),Object(n.useEffect)((function(){z.current?z.current=!1:ue&&function(){if(F(V.current?V.current.offsetWidth:0),ae.length>1){L(!1);var e=new Image;e.src=o,e.onload=function(){var t=W.current,n=t.getContext("2d"),r=e.naturalWidth,o=e.naturalHeight/r;A(o);var l=Math.ceil(w/1.6),c=Math.ceil(o*w/1.6),i=Math.ceil(R/l);t.width=i*l,t.height=i*c,n.drawImage(e,0,0,l,c);var s=n.getImageData(0,0,l,c);n.clearRect(0,0,l,c);for(var u=s.data,m=[],d=0;d<s.height;d++){for(var h=[],f=0;f<s.width;f++){var p=4*s.width*d+4*f,v="#"+[u[p],u[p+1],u[p+2]].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),g=ae.map((function(e){return e.label})),b=a(38).from(g),E=f*i,y=d*i,j=Math.floor(i/2.25)>0?Math.floor(i/2.25):1,k=new Path2D;k.arc(E+i/2,y+i/2,i/2-j/2,0,2*Math.PI,!1),n.lineWidth=j,n.strokeStyle=b(v),n.stroke(k),h.push(b(v))}m.push(h)}if(L(!0),q(m),fe){var O=29*i,S=i*l,M=i*c;n.strokeStyle="#00008B",n.beginPath();for(var x=O;x<S;x+=O)n.moveTo(x,0),n.lineTo(x,M);for(var I=O;I<M;I+=O)n.moveTo(0,I),n.lineTo(S,I);n.lineWidth=1,n.stroke()}}}else alert("Please add at least two colors")}()}),[o,w,R,ue,ae]),Object(n.useEffect)((function(){if("placeholder"!==be){we(!0);var e=document.createElement("a");e.href=be,e.setAttribute("download","file.png"),document.body.appendChild(e),e.click(),e.parentNode.removeChild(e)}}),[be]),r.a.createElement("div",{className:"grid-container"},r.a.createElement(y.a,null,r.a.createElement("title",null,"Perler Maker: A Generator to Create and Export Bead Art"),r.a.createElement("meta",{name:"description",content:"Upload photos and easily convert them into bead mosiacs. Choose colors to represent your beads. Adjust the number of beads in your mosiac. Export your design to a CSV file."})),r.a.createElement("div",{className:"uploadArea"},r.a.createElement("div",{className:"logo"},r.a.createElement(b.a,{className:"logoTitle",gutterBottom:!0,variant:"h3",component:"h3",color:"primary"},"Perler Maker |"),r.a.createElement(b.a,{className:"logoDescription",gutterBottom:!0,variant:"h5",component:"h5",color:"primary"},"Create, Export Bead Art")),r.a.createElement("div",{className:"upload"},r.a.createElement(u.a,{handleFiles:function(e){var t=new Image;t.src=e.base64,l(t.src)},base64:!0},r.a.createElement(m.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(h.a,null)},"Upload"))),r.a.createElement("div",{className:"toggle"},r.a.createElement(O.a,{control:r.a.createElement(S.a,{checked:ue,onChange:function(){me(!ue)},name:"checkedA"}),label:"Edit Colors"})),!ue&&r.a.createElement("div",{className:"position2"},r.a.createElement(f.a,{id:"outlined-number",label:"Colors",type:"number",defaultValue:"5",InputLabelProps:{shrink:!0},variant:"outlined",onChange:function(e){return function(e){var t=parseInt(e.target.value);t>0?ce(t):alert("Please enter a number greater than 1")}(e)}})),r.a.createElement("div",{className:"inputTile"},r.a.createElement(f.a,{id:"outlined-number",label:"Beads",type:"number",defaultValue:"29",InputLabelProps:{shrink:!0},variant:"outlined",onChange:function(e){return function(e){var t,a=parseInt(e.target.value);a>=500&&alert("Please enter a number less than 500"),t=a<500&&a>0?a:1,x(parseFloat((1.6*t).toFixed(1)))}(e)}})),ue&&r.a.createElement("div",{className:"position1"},r.a.createElement(f.a,{id:"hex",label:"Hex",name:"hex",value:X,onChange:function(e){Y(e.target.value)},error:"#"!==X&&!/^#([0-9A-F]{3}){1,2}$/i.test(X),helperText:"#"===X||/^#([0-9A-F]{3}){1,2}$/i.test(X)?" ":"Invalid hex.",variant:"outlined"})),ue&&r.a.createElement("div",{className:"position2"},r.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){if(/^#([0-9A-F]{3}){1,2}$/i.test(X)){var e=Math.floor(1e8*Math.random());ne([].concat(Object(c.a)(ae),[{key:e,label:X}]))}}},"Add")),r.a.createElement("div",{className:"hex"},r.a.createElement(k.a,{id:"hexChild",component:"ul",className:Z.root},ae.map((function(e){return r.a.createElement("li",{key:e.key},r.a.createElement(j.a,{icon:r.a.createElement("input",{className:"color",type:"color",disabled:!0,value:e.label}),label:e.label,onDelete:ue?(t=e,function(){ne((function(e){return e.filter((function(e){return e.key!==t.key}))}))}):null,className:Z.chip}));var t}))))),r.a.createElement("div",{className:"widthInfoArea"},r.a.createElement("div",{className:"gridToggle"},r.a.createElement(O.a,{control:r.a.createElement(S.a,{checked:fe,onChange:function(){return pe(!fe)},name:"checkedA"}),label:"Grid"})),!$&&o?r.a.createElement(b.a,{className:"loadingInfo",variant:"body1",color:"textSecondary",component:"p"},"Beading..."):r.a.createElement("div",null),r.a.createElement("div",{className:"widthInfo"},r.a.createElement(b.a,{variant:"body1",color:"textSecondary",component:"p"},Math.ceil(w/1.6)," beads"))),r.a.createElement("div",{className:"lengthInfo"},r.a.createElement("div",{className:"length"},r.a.createElement(b.a,{variant:"body1",id:"rotate-text",color:"textSecondary",component:"p"},Math.ceil(T*w/1.6)," beads"))),r.a.createElement("div",{ref:V,className:"imgParent"},r.a.createElement(E.a,null,r.a.createElement(p.a,null,r.a.createElement("canvas",{ref:W}),r.a.createElement(g.a,null,r.a.createElement(b.a,{variant:"h6",color:"textSecondary",component:"h6"},Math.ceil(w/1.6)*Math.ceil(T*w/1.6)," beads"),_.length>0?ae.map((function(e){return r.a.createElement("div",{key:e.key,className:"tileCount"},r.a.createElement("input",{className:"color",type:"color",disabled:!0,value:e.label}),r.a.createElement(b.a,{variant:"body1",color:"textSecondary",component:"p"},e.label,", ",_.flat().filter((function(t){return t.toUpperCase()===e.label})).length," beads"))})):r.a.createElement(b.a,{variant:"body1",color:"textSecondary",component:"p"},"Upload a photo, adjust number of beads and colors, add desired hex codes."))),r.a.createElement(v.a,null,r.a.createElement(m.a,{size:"small",onClick:function(){return function(){if(le>1){we(!1);var e=new Image;e.src=o,e.onload=function(){var t=(new M.a).getPalette(e,le).map((function(e){return"#"+e.map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("")})),n=e.naturalWidth,r=e.naturalHeight/n,o=Math.ceil(w/1.6),l=Math.ceil(r*w/1.6),c=I(o,l),i=c.getContext("2d");c.width=50*o,c.height=50*l,i.drawImage(e,0,0,o,l);var s=i.getImageData(0,0,o,l);i.clearRect(0,0,o,l);for(var u=s.data,m=0;m<s.height;m++)for(var d=0;d<s.width;d++){var h=4*s.width*m+4*d,f="#"+[u[h],u[h+1],u[h+2]].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),p=Math.floor(50/2.25)>0?Math.floor(50/2.25):1,v=a(38).from(t),g=50*d,b=50*m,E=new Path2D;E.arc(g+25,b+25,25-p/2,0,2*Math.PI,!1),i.lineWidth=p,i.strokeStyle=v(f),i.stroke(E)}if(fe){var y=50*o,j=50*l;i.strokeStyle="black",i.beginPath();for(var k=1450;k<y;k+=1450)i.moveTo(k,0),i.lineTo(k,j);for(var O=1450;O<j;O+=1450)i.moveTo(0,O),i.lineTo(y,O);i.lineWidth=15,i.stroke()}Ee(c.toDataURL("image/jpg"))}}}()},color:"primary",target:"_blank"},ke?"Export":"Exporting, please wait..."),r.a.createElement(m.a,{size:"small",color:"primary",href:"https://taylorepskamp.github.io/diceify/",target:"_blank"},"Dice Mosaic App")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.d804b125.chunk.js.map