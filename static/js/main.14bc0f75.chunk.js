(this.webpackJsonpperler=this.webpackJsonpperler||[]).push([[0],{49:function(e,t,a){e.exports=a.p+"static/media/parrot.5aa922c0.jpg"},64:function(e,t,a){e.exports=a(82)},69:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),l=a.n(o),c=(a(69),a(55)),i=a(11),s=a(45),m=a.n(s),u=(a(73),a(74),a(124)),d=a(54),h=a.n(d),f=a(130),p=a(127),v=a(129),g=a(128),b=a(83),E=a(126),y=a(46),j=a(132),k=a(84),w=a(120),O=a(125),S=a(131),M=a(39),x=a(49),I=a.n(x),N=a(76),C=N.createCanvas,P=(N.loadImage,Object(w.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5),margin:0},chip:{margin:e.spacing(.5)}}})));var T=function(){var e=Object(n.useState)(I.a),t=Object(i.a)(e,2),o=t[0],l=t[1],s=Object(n.useState)(232),d=Object(i.a)(s,2),w=d[0],x=d[1],N=Object(n.useState)(1),T=Object(i.a)(N,2),A=T[0],W=T[1],B=Object(n.useRef)(null),D=Object(n.useState)(800),R=Object(i.a)(D,2),F=R[0],U=R[1],H=Object(n.useState)(!0),$=Object(i.a)(H,2),L=$[0],z=$[1],G=Object(n.useRef)(null),J=Object(n.useRef)(!0),V=Object(n.useState)([]),_=Object(i.a)(V,2),q=_[0],K=_[1],Q=Object(n.useState)("#"),X=Object(i.a)(Q,2),Y=X[0],Z=X[1],ee=P(),te=Object(n.useState)([]),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(20),le=Object(i.a)(oe,2),ce=le[0],ie=le[1],se=Object(n.useState)(!1),me=Object(i.a)(se,2),ue=me[0],de=me[1],he=Object(n.useState)(!0),fe=Object(i.a)(he,2),pe=fe[0],ve=fe[1],ge=Object(n.useState)("placeholder"),be=Object(i.a)(ge,2),Ee=be[0],ye=be[1],je=Object(n.useState)(!0),ke=Object(i.a)(je,2),we=ke[0],Oe=ke[1];return Object(n.useEffect)((function(){ue||function(){if(U(G.current?G.current.offsetWidth:0),ce>1){z(!1);var e=new Image;e.src=o,e.onload=function(){var t=(new M.a).getPalette(e,ce).map((function(e){return"#"+e.map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("")})),n=t.map((function(e){return{key:Math.floor(Math.random()*Math.floor(1e5)),label:e.toUpperCase()}})),r=B.current,o=r.getContext("2d"),l=e.naturalWidth,c=e.naturalHeight/l;W(c);var i=Math.ceil(w/1.6),s=Math.ceil(c*w/1.6),m=Math.ceil(F/i);r.width=m*i,r.height=m*s,o.drawImage(e,0,0,i,s);var u=o.getImageData(0,0,i,s);o.clearRect(0,0,i,s);for(var d=u.data,h=[],f=0;f<u.height;f++){for(var p=[],v=0;v<u.width;v++){var g=4*u.width*f+4*v,b="#"+[d[g],d[g+1],d[g+2]].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),E=a(38).from(t),y=v*m,j=f*m,k=Math.floor(m/2.25)>0?Math.floor(m/2.25):1,O=new Path2D;O.arc(y+m/2,j+m/2,m/2-k/2,0,2*Math.PI,!1),o.lineWidth=k,o.strokeStyle=E(b),o.stroke(O),p.push(E(b))}h.push(p)}if(re(n),K(h),z(!0),pe){var S=29*m,x=m*i,I=m*s;o.strokeStyle="#00008B",o.beginPath();for(var N=S;N<x;N+=S)o.moveTo(N,0),o.lineTo(N,I);for(var C=S;C<I;C+=S)o.moveTo(0,C),o.lineTo(x,C);o.lineWidth=1,o.stroke()}}}}()}),[o,ce,w,F,ue,pe]),Object(n.useEffect)((function(){J.current?J.current=!1:ue&&function(){if(U(G.current?G.current.offsetWidth:0),ne.length>1){z(!1);var e=new Image;e.src=o,e.onload=function(){var t=B.current,n=t.getContext("2d"),r=e.naturalWidth,o=e.naturalHeight/r;W(o);var l=Math.ceil(w/1.6),c=Math.ceil(o*w/1.6),i=Math.ceil(F/l);t.width=i*l,t.height=i*c,n.drawImage(e,0,0,l,c);var s=n.getImageData(0,0,l,c);n.clearRect(0,0,l,c);for(var m=s.data,u=[],d=0;d<s.height;d++){for(var h=[],f=0;f<s.width;f++){var p=4*s.width*d+4*f,v="#"+[m[p],m[p+1],m[p+2]].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),g=ne.map((function(e){return e.label})),b=a(38).from(g),E=f*i,y=d*i,j=Math.floor(i/2.25)>0?Math.floor(i/2.25):1,k=new Path2D;k.arc(E+i/2,y+i/2,i/2-j/2,0,2*Math.PI,!1),n.lineWidth=j,n.strokeStyle=b(v),n.stroke(k),h.push(b(v))}u.push(h)}if(z(!0),K(u),pe){var O=29*i,S=i*l,M=i*c;n.strokeStyle="#00008B",n.beginPath();for(var x=O;x<S;x+=O)n.moveTo(x,0),n.lineTo(x,M);for(var I=O;I<M;I+=O)n.moveTo(0,I),n.lineTo(S,I);n.lineWidth=1,n.stroke()}}}else alert("Please add at least two colors")}()}),[o,w,F,ue,ne]),Object(n.useEffect)((function(){if("placeholder"!==Ee){Oe(!0);var e=document.createElement("a");e.href=Ee,e.setAttribute("download","file.png"),document.body.appendChild(e),e.click(),e.parentNode.removeChild(e)}}),[Ee]),r.a.createElement("div",{className:"grid-container"},r.a.createElement(y.a,null,r.a.createElement("title",null,"Perler Maker: A Generator to Create and Export Bead Art"),r.a.createElement("meta",{name:"description",content:"Upload photos and easily convert them into perler bead mosiacs. Choose colors to represent your beads. Adjust the number of beads in your mosiac. Export your design as an image."})),r.a.createElement("div",{className:"uploadArea"},r.a.createElement("div",{className:"logo"},r.a.createElement(b.a,{className:"logoTitle",gutterBottom:!0,variant:"h3",component:"h3",color:"primary"},"Perler Maker"),r.a.createElement(b.a,{className:"logoDescription",gutterBottom:!0,variant:"h5",component:"h5",color:"primary"},"| Create, Export Bead Art")),r.a.createElement("div",{className:"upload"},r.a.createElement(m.a,{handleFiles:function(e){var t=new Image;t.src=e.base64,l(t.src)},base64:!0},r.a.createElement(u.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(h.a,null)},"Upload"))),r.a.createElement("div",{className:"toggle"},r.a.createElement(O.a,{control:r.a.createElement(S.a,{checked:ue,onChange:function(){de(!ue)},name:"checkedA"}),label:"Edit Colors"})),!ue&&r.a.createElement("div",{className:"position2"},r.a.createElement(f.a,{id:"outlined-number",label:"Colors",type:"number",defaultValue:"20",InputLabelProps:{shrink:!0},variant:"outlined",onChange:function(e){return function(e){var t=parseInt(e.target.value);t>0?ie(t):alert("Please enter a number greater than 1")}(e)}})),r.a.createElement("div",{className:"inputTile"},r.a.createElement(f.a,{id:"outlined-number",label:"Beads",type:"number",defaultValue:"145",InputLabelProps:{shrink:!0},variant:"outlined",onChange:function(e){return function(e){var t,a=parseInt(e.target.value);a>=500&&alert("Please enter a number less than 500"),t=a<500&&a>0?a:1,x(parseFloat((1.6*t).toFixed(1)))}(e)}})),ue&&r.a.createElement("div",{className:"position1"},r.a.createElement(f.a,{id:"hex",label:"Hex",name:"hex",value:Y,onChange:function(e){Z(e.target.value)},error:"#"!==Y&&!/^#([0-9A-F]{3}){1,2}$/i.test(Y),helperText:"#"===Y||/^#([0-9A-F]{3}){1,2}$/i.test(Y)?" ":"Invalid hex.",variant:"outlined"})),ue&&r.a.createElement("div",{className:"position2"},r.a.createElement(u.a,{variant:"contained",color:"primary",onClick:function(){if(/^#([0-9A-F]{3}){1,2}$/i.test(Y)){var e=Math.floor(1e8*Math.random());re([].concat(Object(c.a)(ne),[{key:e,label:Y}]))}}},"Add")),r.a.createElement("div",{className:"hex"},r.a.createElement(k.a,{id:"hexChild",component:"ul",className:ee.root},ne.map((function(e){return r.a.createElement("li",{key:e.key},r.a.createElement(j.a,{icon:r.a.createElement("input",{className:"color",type:"color",disabled:!0,value:e.label}),label:e.label,onDelete:ue?(t=e,function(){re((function(e){return e.filter((function(e){return e.key!==t.key}))}))}):null,className:ee.chip}));var t}))))),r.a.createElement("div",{className:"widthInfoArea"},r.a.createElement("div",{className:"gridToggle"},r.a.createElement(O.a,{control:r.a.createElement(S.a,{checked:pe,onChange:function(){return ve(!pe)},name:"checkedA"}),label:"Grid"})),!L&&o?r.a.createElement(b.a,{className:"loadingInfo",variant:"body1",color:"textSecondary",component:"p"},"Beading..."):r.a.createElement("div",null),r.a.createElement("div",{className:"widthInfo"},r.a.createElement(b.a,{variant:"body1",color:"textSecondary",component:"p"},Math.ceil(w/1.6)," beads"))),r.a.createElement("div",{className:"lengthInfo"},r.a.createElement("div",{className:"length"},r.a.createElement(b.a,{variant:"body1",id:"rotate-text",color:"textSecondary",component:"p"},Math.ceil(A*w/1.6)," beads"))),r.a.createElement("div",{ref:G,className:"imgParent"},r.a.createElement(E.a,null,r.a.createElement(p.a,null,r.a.createElement("canvas",{ref:B}),r.a.createElement(g.a,null,r.a.createElement(b.a,{variant:"h6",color:"textSecondary",component:"h6"},Math.ceil(w/1.6)*Math.ceil(A*w/1.6)," beads"),q.length>0?ne.map((function(e){return r.a.createElement("div",{key:e.key,className:"tileCount"},r.a.createElement("input",{className:"color",type:"color",disabled:!0,value:e.label}),r.a.createElement(b.a,{variant:"body1",color:"textSecondary",component:"p"},e.label,", ",q.flat().filter((function(t){return t.toUpperCase()===e.label})).length," beads"))})):r.a.createElement(b.a,{variant:"body1",color:"textSecondary",component:"p"},"Upload a photo, adjust number of beads and colors, add desired hex codes."))),r.a.createElement(v.a,null,r.a.createElement(u.a,{size:"small",onClick:function(){return function(){if(ce>1){Oe(!1);var e=new Image;e.src=o,e.onload=function(){var t=(new M.a).getPalette(e,ce).map((function(e){return"#"+e.map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("")})),n=e.naturalWidth,r=e.naturalHeight/n,o=Math.ceil(w/1.6),l=Math.ceil(r*w/1.6),c=C(o,l),i=c.getContext("2d");c.width=50*o,c.height=50*l,i.drawImage(e,0,0,o,l);var s=i.getImageData(0,0,o,l);i.clearRect(0,0,o,l);for(var m=s.data,u=0;u<s.height;u++)for(var d=0;d<s.width;d++){var h=4*s.width*u+4*d,f="#"+[m[h],m[h+1],m[h+2]].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),p=Math.floor(50/2.25)>0?Math.floor(50/2.25):1,v=a(38).from(t),g=50*d,b=50*u,E=new Path2D;E.arc(g+25,b+25,25-p/2,0,2*Math.PI,!1),i.lineWidth=p,i.strokeStyle=v(f),i.stroke(E)}if(pe){var y=50*o,j=50*l;i.strokeStyle="black",i.beginPath();for(var k=1450;k<y;k+=1450)i.moveTo(k,0),i.lineTo(k,j);for(var O=1450;O<j;O+=1450)i.moveTo(0,O),i.lineTo(y,O);i.lineWidth=15,i.stroke()}ye(c.toDataURL("image/jpg"))}}}()},color:"primary",target:"_blank"},we?"Export":"Exporting, please wait..."),r.a.createElement(u.a,{size:"small",color:"primary",href:"https://taylorepskamp.github.io/diceify/",target:"_blank"},"Dice Mosaic App")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.14bc0f75.chunk.js.map